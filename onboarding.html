<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Configuración • Indicadores Banxico (SIE)</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --primary: hsl(210 60% 25%);
      --secondary: hsl(170 45% 45%);
      --background: hsl(0 0% 100%);
      --muted: hsl(210 20% 96%);
      --border: hsl(210 20% 90%);

      --bg: var(--background);
      --fg: hsl(210 60% 15%);
      --text-muted: hsl(210 40% 45%);
      --radius: 12px;
      --btn-radius: 10px;
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: var(--muted);
      color: var(--fg);
      font-family: 'Manrope', -apple-system, sans-serif;
      line-height: 1.5;
    }

    h1,
    h2,
    h3,
    .brand {
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 48px 24px;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 32px;
    }

    .brand {
      font-weight: 700;
      font-size: 24px;
      letter-spacing: -0.02em;
      color: var(--primary);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 4px 12px;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-decoration: none;
      background: var(--bg);
    }

    .grid {
      margin-bottom: 24px;
    }

    .grid-two {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }

    @media(min-width: 768px) {
      .grid-two {
        grid-template-columns: 1.2fr 0.8fr;
      }
    }

    .card {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 32px;
      background: var(--bg);
      box-shadow: var(--shadow);
    }

    h1 {
      font-size: 20px;
      margin: 0 0 12px;
    }

    h2 {
      font-size: 18px;
      margin: 0 0 12px;
    }

    p {
      color: var(--text-muted);
      margin: 0 0 16px;
      font-size: 14px;
    }

    label {
      display: block;
      font-weight: 600;
      margin: 16px 0 8px;
      font-size: 14px;
    }

    input[type=text],
    input[type=search],
    select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: var(--btn-radius);
      font-size: 14px;
      background: var(--bg);
      transition: border-color 0.3s, box-shadow 0.2s;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px hsla(170, 45%, 45%, 0.15);
    }

    .row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: flex-end;
      margin-top: 16px;
    }

    button {
      appearance: none;
      border: none;
      background: var(--primary);
      color: #FFF;
      border-radius: var(--btn-radius);
      padding: 12px 24px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    button:hover {
      background: hsl(210 60% 20%);
      transform: translateY(-1px);
    }

    button.secondary {
      background: var(--bg);
      border: 1px solid var(--border);
      color: var(--fg);
    }

    button.secondary:hover {
      border-color: var(--secondary);
      background: var(--muted);
    }

    button:focus-visible {
      outline: 3px solid hsla(210, 60%, 25%, 0.3);
      outline-offset: 2px
    }

    .note {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 8px
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem
    }

    .chip {
      background: var(--muted);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: .35rem .6rem;
      display: inline-flex;
      gap: .5rem;
      align-items: center
    }

    button.secondary:hover {
      border-color: #CBD5E1;
      background: #F8FAFC;
    }

    button:focus-visible {
      outline: 3px solid rgba(59, 130, 246, 0.3);
      outline-offset: 2px
    }

    .note {
      font-size: 12px;
      color: var(--muted);
      margin-top: 8px
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem
    }

    .chip {
      background: #f3f4f6;
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: .35rem .6rem;
      display: inline-flex;
      gap: .5rem;
      align-items: center
    }

    .chip-x {
      border: 0;
      background: transparent;
      cursor: pointer;
      font-size: 14px
    }

    .row-sub {
      color: #6b7280;
      font-size: .875rem
    }

    .series-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #f3f4f6;
      border-radius: 8px;
      padding: 10px 12px;
      margin: 6px 0
    }

    .series-item-content {
      flex: 1
    }

    .series-item-actions {
      display: flex;
      gap: 4px;
      align-items: center
    }

    .arrow-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      padding: 4px 6px;
      color: #64748b;
      transition: color 0.2s
    }

    .arrow-btn:hover:not(:disabled) {
      color: #0f172a
    }

    .arrow-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed
    }

    .edit-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      padding: 4px 6px;
      color: #64748b;
      transition: color 0.2s
    }

    .edit-btn:hover {
      color: #0f172a
    }

    .delete-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      padding: 4px 6px;
      color: #64748b;
      transition: color 0.2s
    }

    .edit-mode {
      background: #fef3c7;
      border: 1px solid #fde68a;
      border-radius: 12px;
      padding: 12px
    }

    .edit-mode-label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      color: #92400e;
      margin-bottom: 6px;
      font-size: 13px
    }

    .edit-mode-label::before {
      content: "✏️"
    }

    footer a {
      color: var(--fg);
      text-decoration: none;
      border-bottom: 1px solid var(--border)
    }

    .w-120 {
      width: 120px
    }

    .w-90 {
      width: 90px
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px
    }

    th,
    td {
      padding: 6px 4px;
      border-bottom: 1px solid var(--border);
      text-align: left
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <div class="brand">Indicadores Banxico <span class="badge">SIE</span></div>
      <a href="https://alasha.biz" target="_blank" rel="noopener" class="badge">alasha.biz</a>
    </div>
    <div class="grid">
      <div class="card">
        <h1>Token SIE</h1>
        <p>Obtén tu token gratuito en la <a href="https://www.banxico.org.mx/SieAPIRest/service/v1/token"
            target="_blank" rel="noopener">API del SIE</a>.</p>
        <label for="token">Token</label>
        <input id="token" type="text" placeholder="Pega aquí tu token">
        <div class="row" style="margin-top:8px">
          <button id="save">Guardar</button>
          <button id="test" class="secondary">Probar</button>
        </div>
        <div id="msg" class="note" role="status" aria-live="polite"></div>
      </div>
    </div>
    <div class="grid-two">
      <div class="card">
        <h1>Añadir serie por ID</h1>
        <div id="editModeIndicator" style="display:none">
          <div class="edit-mode">
            <div class="edit-mode-label">Editando: <span id="editingSeriesName"></span></div>
          </div>
        </div>
        <p>Pega un <strong>ID SIE</strong> (ej. <code>SF43718</code>, <code>SF61745</code>).</p>
        <p>¿No sabes cuál ID usar? Consulta el
          <a href="https://www.banxico.org.mx/SieAPIRest/service/v1/doc/catalogoSeries" target="_blank" rel="noopener">
            catálogo completo de series del SIE
          </a>.
        </p>
        <div class="row">
          <input id="seriesId" type="text" placeholder="ID de serie (SFxxxxx)" class="w-120">
          <div id="manualFormat" style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <select id="seriesType" class="w-120">
              <option value="percent">%</option>
              <option value="currency">$</option>
              <option value="number">#</option>
            </select>
            <input id="seriesCurrency" type="text" placeholder="MXN" class="w-90">
            <select id="seriesDecimals" class="w-90">
              <option>0</option>
              <option>1</option>
              <option selected>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
            </select>
          </div>
          <button id="addById">Añadir</button>
          <button id="cancelEdit" class="secondary" style="display:none">Cancelar</button>
        </div>
        <div id="seriesMsg" class="note" role="status" aria-live="polite"></div>
      </div>
      <div class="card">
        <h2>Seleccionadas</h2>
        <div id="selected" class="chips"></div>
        <div class="note">Se muestran en el popup en el mismo orden.</div>
      </div>
    </div>
    <footer>Hecho por <a href="https://alasha.biz" target="_blank" rel="noopener">Alasha Collective</a>.</footer>
  </div>
  <script type="module" src="onboarding.js"></script>
</body>

</html>